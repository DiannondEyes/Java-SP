# Знакомство с многопоточной обработкой
## Контрольные вопросы:
1. Почему эффект от распараллеливания наблюдается только при большем числе элементов?
2. Почему увеличение сложности обработки повышает эффективность многопоточной обработки?
3. Какое число потоков является оптимальным для конкретной вычислительной системы?
4. Почему неравномерность загрузки потоков приводит к снижению эффективности многопоточной обработки?
5. Какие другие варианты декомпозиции позволяют увеличить равномерность загрузки потоков?
6. В какой ситуации круговая декомпозиция не обеспечивает равномерную загрузку потоков?
## Ответы:
1. Причина, по которой эффект от распараллеливания наблюдается только при большем числе элементов, связана с накладными расходами на создание и управление потоками. Когда количество элементов невелико, эти накладные расходы могут превышать выигрыш от параллельной обработки, что приводит к снижению эффективности.
2. Увеличение сложности обработки повышает эффективность многопоточной обработки, потому что в этом случае накладные расходы на создание и управление потоками оказываются незначительными по сравнению с выигрышем от параллельной обработки. То есть, чем больше вычислительная нагрузка, тем больше выигрыш от использования многопоточности.
3. Оптимальное число потоков для конкретной вычислительной системы зависит от нескольких факторов, таких как количество доступных ядер процессора, тип задачи, доступность других ресурсов (например, памяти) и т. д. В общем случае, оптимальное число потоков может быть равно количеству доступных ядер процессора или немного меньше.
4. Неравномерность загрузки потоков приводит к снижению эффективности многопоточной обработки, потому что некоторые потоки могут ожидать завершения работы других потоков, в то время как они могли бы выполнять полезную работу. Это называется "простоем" потоков и является нежелательным явлением в многопоточных приложениях.
5. Другие варианты декомпозиции, позволяющие увеличить равномерность загрузки потоков, включают:
    - Блочную декомпозицию, при которой входные данные разбиваются на блоки фиксированного размера, которые обрабатываются потоками независимо друг от друга.
    - Декомпозицию по задачам, при которой входные данные разбиваются на независимые задачи, которые могут быть обработаны потоками параллельно.
6. Круговая декомпозиция не обеспечивает равномерную загрузку потоков в ситуации, когда некоторые задачи требуют больше времени для выполнения, чем другие. В этом случае, потоки, обрабатывающие более сложные задачи, будут замедляться, в то время как потоки, обрабатывающие более простые задачи, будут простаивать. Это приводит к неравномерной загрузке потоков и снижению эффективности многопоточной обработки.

## Эффективность однопоточной обработки
| N      | Время выполнения, мс |
|:------:|:--------------------:|
| 10     | 7                    |
| 100    | 8                    |
| 1000   | 26                   |
| 100000 | 40                   |
## Эффективность многопоточной обработки
| M  | N      | Время выполнения, мс |
| -- | ------ | -------------------- |
| 2  | 10     | 3                    |
| 3  | 10     | 9                    |
| 4  | 10     | 5                    |
| 5  | 10     | 6                    |
| 10 | 10     | 8                    |
| 2  | 100    | 5                    |
| 3  | 100    | 8                    |
| 4  | 100    | 3                    |
| 5  | 100    | 3                    |
| 10 | 100    | 5                    |
| 2  | 1000   | 9                    |
| 3  | 1000   | 6                    |
| 4  | 1000   | 5                    |
| 5  | 1000   | 6                    |
| 10 | 1000   | 8                    |
| 2  | 100000 | 71                   |
| 3  | 100000 | 82                   |
| 4  | 100000 | 67                   |
| 5  | 100000 | 65                   |
| 10 | 100000 | 70                   |
# В итоге получается, что многопоточная обработка длится дольше однопоточной.
## Наверное, потому что большая часть времени тратится на распределение элементов и создание потоков